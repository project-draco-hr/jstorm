{
  StormClusterState stormClusterState=nimbusData.getStormClusterState();
  String topologyId=event.getTopologyId();
  String topologyName=event.getTopologyName();
  if (topologyName != null) {
    LOG.info("Activating " + topologyName + ": "+ topologyId);
    StormStatus status=new StormStatus(StatusType.active);
    StormBase stormBase=new StormBase(topologyName,TimeUtils.current_time_secs(),status);
    stormClusterState.activate_storm(topologyId,stormBase);
  }
 else   if (event.getOldStatus() != null) {
    StormStatus status=event.getOldStatus();
    if (status.getStatusType() != StatusType.inactive) {
      status.setStatusType(StatusType.active);
    }
    stormClusterState.update_storm(topologyId,event.getOldStatus());
    LOG.info("Restore topology status " + event.getOldStatus());
  }
}
