{
  StormTopology sysTopology=defaultContext.getSysTopology();
  final Map<Integer,String> taskToComponent=defaultContext.getTaskToComponent();
  String componentName=taskToComponent.get(taskId);
  if (componentName == null) {
    LOG.warn("No component name of " + taskId);
    return ComponentAssignType.NORMAL;
  }
  ComponentCommon common=ThriftTopologyUtils.getComponentCommon(sysTopology,componentName);
  String jsonConfString=common.get_json_conf();
  if (jsonConfString == null) {
    return ComponentAssignType.NORMAL;
  }
  Map componentMap=new HashMap();
  componentMap.putAll((Map)JStormUtils.from_json(jsonConfString));
  if (JStormServerConfig.getUserDefineAssignmentFromJson(componentMap) != null) {
    return ComponentAssignType.USER_DEFINE;
  }
 else   if (ConfigExtension.isUseOldAssignment(componentMap)) {
    return ComponentAssignType.USE_OLD;
  }
 else   if (ConfigExtension.isUseOldAssignment(defaultContext.getStormConf())) {
    return ComponentAssignType.USE_OLD;
  }
 else {
    return ComponentAssignType.NORMAL;
  }
}
