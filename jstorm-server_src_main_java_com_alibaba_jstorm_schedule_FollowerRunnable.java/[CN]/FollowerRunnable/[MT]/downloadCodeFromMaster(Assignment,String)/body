{
  try {
    String localRoot=StormConfig.masterStormdistRoot(data.getConf(),topologyId);
    String tmpDir=localRoot + UUID.randomUUID().toString();
    ;
    String masterCodeDir=assignment.getMasterCodeDir();
    JStormServerUtils.downloadCodeFromMaster(data.getConf(),tmpDir,masterCodeDir);
    FileUtils.moveDirectory(new File(tmpDir),new File(localRoot));
  }
 catch (  TException e) {
    LOG.error(e + " downloadStormCode failed " + "topologyId:"+ topologyId+ "masterCodeDir:"+ assignment.getMasterCodeDir());
    throw e;
  }
  LOG.info("Finished downloading code for topology id " + topologyId + " from "+ assignment.getMasterCodeDir());
}
